# Markdown æ¸²æŸ“å™¨å‡çº§æŒ‡å—

## æ¦‚è¿°

æœ¬æ¬¡å‡çº§ä¸º OpenNanos Platform UI æ·»åŠ äº†ä¼˜é›…çš„ Markdown æ¸²æŸ“æ”¯æŒï¼Œä½¿ç”¨ä¸šç•Œæœ€ä½³å®è·µï¼š
- **react-markdown**: React ç”Ÿæ€ä¸­æœ€æµè¡Œçš„ Markdown æ¸²æŸ“åº“
- **GitHub Markdown CSS**: GitHub å®˜æ–¹æ ·å¼ï¼Œä¸“ä¸šç¾è§‚
- **Syntax Highlighting**: æ”¯æŒ 100+ ç¼–ç¨‹è¯­è¨€çš„ä»£ç é«˜äº®

## å®‰è£…æ­¥éª¤

### æ–¹æ³• 1: è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰

```bash
cd /Users/mac/Desktop/openNanos/opennanos-platform/ui
./install-markdown.sh
```

### æ–¹æ³• 2: æ‰‹åŠ¨å®‰è£…

1. **ä¿®å¤ npm æƒé™ï¼ˆå¦‚æœé‡åˆ°æƒé™é”™è¯¯ï¼‰**:
```bash
sudo chown -R $(id -u):$(id -g) "$HOME/.npm"
```

2. **å®‰è£…ä¾èµ–**:
```bash
cd /Users/mac/Desktop/openNanos/opennanos-platform/ui

npm install \
  react-markdown@^9.0.1 \
  remark-gfm@^4.0.0 \
  rehype-raw@^7.0.0 \
  rehype-sanitize@^6.0.0 \
  react-syntax-highlighter@^15.6.1 \
  github-markdown-css@^5.8.1

npm install --save-dev \
  @types/react-syntax-highlighter@^15.5.13
```

## å·²å®ç°çš„åŠŸèƒ½

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

- âœ… **GitHub Flavored Markdown (GFM)**
  - è¡¨æ ¼æ”¯æŒ
  - åˆ é™¤çº¿ (`~~text~~`)
  - ä»»åŠ¡åˆ—è¡¨ (`- [ ]` / `- [x]`)
  - è‡ªåŠ¨é“¾æ¥è¯†åˆ«

- âœ… **ä»£ç é«˜äº®**
  - æ”¯æŒ 100+ ç¼–ç¨‹è¯­è¨€
  - è¡Œå·æ˜¾ç¤º
  - æµ…è‰²/æ·±è‰²ä¸»é¢˜è‡ªé€‚åº”
  - ä¼˜é›…çš„æ»šåŠ¨æ¡æ ·å¼

- âœ… **å®‰å…¨æ€§**
  - HTML å†…å®¹è‡ªåŠ¨æ¸…ç†ï¼ˆé˜² XSSï¼‰
  - ä»…å…è®¸å®‰å…¨æ ‡ç­¾
  - å¤–éƒ¨é“¾æ¥è‡ªåŠ¨æ·»åŠ  `target="_blank"` å’Œ `rel="noopener noreferrer"`

- âœ… **ä¸»é¢˜æ”¯æŒ**
  - è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¸»é¢˜ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰
  - å“åº”å¼è®¾è®¡
  - ä¼˜é›…çš„åŠ¨ç”»æ•ˆæœ

- âœ… **ä¸°å¯Œçš„æ ·å¼**
  - æ ‡é¢˜ï¼ˆH1-H6ï¼‰
  - å¼•ç”¨å—ï¼ˆå¸¦å·¦ä¾§è¾¹æ¡†ï¼‰
  - æœ‰åº/æ— åºåˆ—è¡¨
  - å›¾ç‰‡ï¼ˆè‡ªé€‚åº”å¤§å° + åœ†è§’ + é˜´å½±ï¼‰
  - è¡¨æ ¼ï¼ˆæ–‘é©¬çº¹ + è¾¹æ¡†ï¼‰
  - æ°´å¹³åˆ†å‰²çº¿

### ğŸ¨ è§†è§‰å¢å¼º

- **æ¶ˆæ¯æ°”æ³¡**:
  - ç”¨æˆ·æ¶ˆæ¯ï¼šè“è‰²èƒŒæ™¯
  - AI æ¶ˆæ¯ï¼šç™½è‰²èƒŒæ™¯ï¼ˆå¸¦è¾¹æ¡†ï¼‰
  - æµå¼è¾“å‡ºï¼šè„‰å†²åŠ¨ç”»æ•ˆæœ

- **ä»£ç å—**:
  - è¯­æ³•é«˜äº®
  - åœ†è§’è¾¹æ¡†
  - é˜´å½±æ•ˆæœ
  - è‡ªå®šä¹‰æ»šåŠ¨æ¡

- **è¡¨æ ¼**:
  - å“åº”å¼æ¨ªå‘æ»šåŠ¨
  - è¡¨å¤´èƒŒæ™¯
  - æ–‘é©¬çº¹è¡Œ

## æ–‡ä»¶è¯´æ˜

### æ–°å¢æ–‡ä»¶

1. **`src/components/MarkdownRenderer.tsx`**
   - Markdown æ¸²æŸ“æ ¸å¿ƒç»„ä»¶
   - è‡ªå®šä¹‰ä»£ç å—ã€é“¾æ¥ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰å…ƒç´ 
   - ä¸»é¢˜è‡ªé€‚åº”é€»è¾‘

2. **`src/components/MarkdownRenderer.css`**
   - å®Œæ•´çš„ Markdown æ ·å¼
   - æµ…è‰²/æ·±è‰²ä¸»é¢˜é€‚é…
   - å“åº”å¼è®¾è®¡
   - åŠ¨ç”»æ•ˆæœ

3. **`install-markdown.sh`**
   - è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬
   - æƒé™ä¿®å¤é€»è¾‘

### ä¿®æ”¹æ–‡ä»¶

1. **`src/components/ChatInterface.tsx`**
   - å¯¼å…¥ `MarkdownRenderer`
   - AI æ¶ˆæ¯ä½¿ç”¨ Markdown æ¸²æŸ“
   - ç”¨æˆ·æ¶ˆæ¯ä¿æŒçº¯æ–‡æœ¬
   - æµå¼è¾“å‡ºæ”¯æŒ Markdown æ¸²æŸ“

2. **`src/components/Chat.css`**
   - æ·»åŠ æµå¼è¾“å‡ºè„‰å†²åŠ¨ç”»
   - è°ƒæ•´ AI æ¶ˆæ¯æ°”æ³¡æ ·å¼ï¼ˆç™½åº• + è¾¹æ¡†ï¼‰

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```tsx
import { MarkdownRenderer } from './components/MarkdownRenderer';

function MyComponent() {
  const markdown = `
# æ ‡é¢˜

è¿™æ˜¯ **ç²—ä½“** å’Œ *æ–œä½“* æ–‡æœ¬ã€‚

## ä»£ç ç¤ºä¾‹

\`\`\`typescript
function hello(name: string) {
  console.log(\`Hello, \${name}!\`);
}
\`\`\`

## è¡¨æ ¼

| åˆ—1 | åˆ—2 |
|-----|-----|
| æ•°æ®1 | æ•°æ®2 |

## ä»»åŠ¡åˆ—è¡¨

- [x] å®Œæˆçš„ä»»åŠ¡
- [ ] æœªå®Œæˆçš„ä»»åŠ¡
  `;

  return <MarkdownRenderer content={markdown} theme="light" />;
}
```

### ä¸»é¢˜åˆ‡æ¢

```tsx
// è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰
<MarkdownRenderer content={markdown} />

// å¼ºåˆ¶æµ…è‰²ä¸»é¢˜
<MarkdownRenderer content={markdown} theme="light" />

// å¼ºåˆ¶æ·±è‰²ä¸»é¢˜
<MarkdownRenderer content={markdown} theme="dark" />
```

## æ”¯æŒçš„ Markdown è¯­æ³•

### æ–‡æœ¬æ ¼å¼

```markdown
**ç²—ä½“** æˆ– __ç²—ä½“__
*æ–œä½“* æˆ– _æ–œä½“_
~~åˆ é™¤çº¿~~
`è¡Œå†…ä»£ç `
```

### æ ‡é¢˜

```markdown
# H1 æ ‡é¢˜
## H2 æ ‡é¢˜
### H3 æ ‡é¢˜
#### H4 æ ‡é¢˜
##### H5 æ ‡é¢˜
###### H6 æ ‡é¢˜
```

### åˆ—è¡¨

```markdown
- æ— åºåˆ—è¡¨é¡¹ 1
- æ— åºåˆ—è¡¨é¡¹ 2
  - åµŒå¥—é¡¹

1. æœ‰åºåˆ—è¡¨é¡¹ 1
2. æœ‰åºåˆ—è¡¨é¡¹ 2

- [ ] å¾…åŠäº‹é¡¹
- [x] å·²å®Œæˆäº‹é¡¹
```

### å¼•ç”¨

```markdown
> è¿™æ˜¯å¼•ç”¨å†…å®¹
> å¯ä»¥å¤šè¡Œ
```

### ä»£ç å—

````markdown
```python
def hello(name):
    print(f"Hello, {name}!")
```
````

æ”¯æŒçš„è¯­è¨€åŒ…æ‹¬ï¼š
- JavaScript/TypeScript
- Python
- Java
- C/C++
- Go
- Rust
- Ruby
- PHP
- Shell
- SQL
- ç­‰ 100+ ç§è¯­è¨€

### è¡¨æ ¼

```markdown
| åˆ—1 | åˆ—2 | åˆ—3 |
|-----|-----|-----|
| A   | B   | C   |
| D   | E   | F   |
```

### é“¾æ¥å’Œå›¾ç‰‡

```markdown
[é“¾æ¥æ–‡æœ¬](https://example.com)

![å›¾ç‰‡æè¿°](https://example.com/image.png)
```

### æ°´å¹³çº¿

```markdown
---
æˆ–
***
æˆ–
___
```

## æ€§èƒ½ä¼˜åŒ–

- âœ… ä»£ç åˆ†å‰²ï¼ˆlazy loadingï¼‰
- âœ… å›¾ç‰‡æ‡’åŠ è½½
- âœ… ä¸»é¢˜æ£€æµ‹ç¼“å­˜
- âœ… CSS åŠ¨ç”»ç¡¬ä»¶åŠ é€Ÿ

## æµè§ˆå™¨å…¼å®¹æ€§

- âœ… Chrome/Edge 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… iOS Safari 14+
- âœ… Android Chrome 90+

## å¸¸è§é—®é¢˜

### Q: ä»£ç é«˜äº®ä¸æ˜¾ç¤ºï¼Ÿ
A: ç¡®ä¿å®‰è£…äº† `react-syntax-highlighter` å¹¶å¯¼å…¥äº†æ ·å¼æ–‡ä»¶ã€‚

### Q: è¡¨æ ¼æ¨ªå‘æº¢å‡ºï¼Ÿ
A: å·²è‡ªåŠ¨å¤„ç†ï¼Œè¡¨æ ¼å®¹å™¨æ”¯æŒæ¨ªå‘æ»šåŠ¨ã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰æ ·å¼ï¼Ÿ
A: ä¿®æ”¹ `MarkdownRenderer.css` ä¸­çš„ CSS å˜é‡æˆ–ç±»æ ·å¼ã€‚

### Q: æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶å—ï¼Ÿ
A: æ˜¯çš„ï¼Œåœ¨ `MarkdownRenderer.tsx` çš„ `components` å±æ€§ä¸­å¯ä»¥è‡ªå®šä¹‰ä»»ä½• Markdown å…ƒç´ çš„æ¸²æŸ“æ–¹å¼ã€‚

## ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. **æ•°å­¦å…¬å¼æ”¯æŒ**: æ·»åŠ  `remark-math` + `rehype-katex`
2. **Mermaid å›¾è¡¨**: æ·»åŠ  `mermaid` æ”¯æŒæµç¨‹å›¾/æ—¶åºå›¾
3. **Emoji æ”¯æŒ**: æ·»åŠ  `remark-emoji` æ’ä»¶
4. **è‡ªå®šä¹‰å®¹å™¨**: æ·»åŠ æç¤ºæ¡†ï¼ˆinfo/warning/errorï¼‰æ ·å¼
5. **ç›®å½•ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ç›®å½•

## æŠ€æœ¯æ ˆ

| åº“ | ç‰ˆæœ¬ | ç”¨é€” |
|----|------|------|
| react-markdown | ^9.0.1 | Markdown æ¸²æŸ“æ ¸å¿ƒ |
| remark-gfm | ^4.0.0 | GitHub Flavored Markdown |
| rehype-raw | ^7.0.0 | HTML åŸå§‹å†…å®¹æ”¯æŒ |
| rehype-sanitize | ^6.0.0 | HTML å®‰å…¨æ¸…ç† |
| react-syntax-highlighter | ^15.6.1 | ä»£ç è¯­æ³•é«˜äº® |
| github-markdown-css | ^5.8.1 | GitHub å®˜æ–¹æ ·å¼ |

## è®¸å¯è¯

ä¸ OpenNanos é¡¹ç›®ä¿æŒä¸€è‡´

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**ä½œè€…**: Claude Code
**æ—¥æœŸ**: 2026-02-07
**ç‰ˆæœ¬**: 1.0.0
